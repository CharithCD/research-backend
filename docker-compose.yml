# services:
#   api:
#     build: ./backend
#     container_name: simple_gec_api
#     env_file: .env
#     ports:
#       - "8000:8000"
#     restart: unless-stopped
#     environment:
#       HF_HOME: /root/.cache/huggingface
#       # Optional: uncomment to see HF download logs
#       # TRANSFORMERS_VERBOSITY: info
#       NLTK_DATA: /root/nltk_data
#     volumes:
#       - ./backend/app:/app/app            # live code (no rebuilds for code)
#       - hf_cache:/root/.cache/huggingface # persist model weights
#       - data:/app/data
#     command: ["uvicorn","app.main:app","--host","0.0.0.0","--port","8000","--workers","1"]

# volumes:
#   hf_cache:
#   data:
services:
  api:
    build:
      context: .                 # ðŸ‘ˆ build from repo root
      dockerfile: backend/Dockerfile
    image: research-backend:prod
    env_file: .env
    ports:
      - "8000:8000"
    environment:
      NLTK_DATA: /root/nltk_data
      HF_HOME: /root/.cache/huggingface
    volumes:
      - hf_cache:/root/.cache/huggingface
      - data:/app/data
volumes:
  hf_cache:
  data:
